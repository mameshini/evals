kind: AdaptiveDialog
beginDialog:
  kind: OnRecognizedIntent
  id: main
  intent:
    triggerQueries:
      - Feedback
      - This response is not helpful
      - Incorrect response
      - Wrong response

  actions:
    - kind: Question
      id: question_Vy6MZK
      interruptionPolicy:
        allowInterruption: true

      alwaysPrompt: true
      variable: init:Topic.Like
      prompt: We value your feedback.  Was the last response helpful?
      entity:
        kind: EmbeddedEntity
        definition:
          kind: ClosedListEntity
          items:
            - id: Yes
              displayName: Yes

            - id: No
              displayName: No

    - kind: Question
      id: question_h4qdoK
      interruptionPolicy:
        allowInterruption: true

      alwaysPrompt: true
      variable: init:Topic.UserFeeback
      prompt: Could you please provide more details?
      entity: StringPrebuiltEntity

    - kind: ConditionGroup
      id: conditionGroup_rH5nfo
      conditions:
        - id: conditionItem_M3eDch
          condition: =Topic.Like = 'cr3fb_itHelpdeskV1.topic.Feedback.main.question_Vy6MZK'.Yes
          actions:
            - kind: SetVariable
              id: setVariable_msRezL
              variable: Topic.Positive
              value: true

        - id: conditionItem_ZmvsfG
          condition: =Topic.Like = 'cr3fb_itHelpdeskV1.topic.Feedback.main.question_Vy6MZK'.No
          actions:
            - kind: SetVariable
              id: setVariable_Acc62X
              variable: Topic.Positive
              value: false

    - kind: InvokeFlowAction
      id: Z2wODf
      input:
        binding:
          text: =Coalesce(Global.Question, "n/a")
          text_1: =Coalesce(Global.VarAnswer, "n/a")
          text_2: =Coalesce(Topic.UserFeeback, "n/a")
          text_3: =System.User.PrincipalName
          text_4: =Text(Topic.Positive)
          text_5: 1.0.7.0
          text_6: Feedback

      output: {}
      flowId: 965eb6af-32c7-ef11-b8e8-7c1e52007db8

    - kind: SendActivity
      id: sendActivity_hDQP1v
      activity:
        text:
          - Thank you, your feedback was recorded.  Can I help you with anything else?
        quickReplies:
          - kind: MessageBack
            text: What can I ask?

    - kind: EndDialog
      id: uAiwt2